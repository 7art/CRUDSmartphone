(this.webpackJsonpeshop=this.webpackJsonpeshop||[]).push([[0],{216:function(e,t,n){},217:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(23),r=n.n(a),i=n(11),o=n(14),s=n(123),l=n(124),u=n.n(l),j=n(71),b=n(10),d=n(18),p=n.n(d),O=n(34),h=n(125),f=n.n(h).a.create({baseURL:""}),m="CREATE_PHONE",x="GET_PHONE",y="UPDATE_PHONE",v="DELETE_PHONE",g={list:[],isLoading:!0};var C="SHOW_MODAL",N="HIDE_MODAL";var w={modal:!1};var k=n(263),E=Object(i.c)({phones:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(b.a)(Object(b.a)({},e),{},{list:[].concat(Object(j.a)(e.list),Object(j.a)(t.payload)),isLoading:!1});case m:return Object(b.a)(Object(b.a)({},e),{},{list:[].concat(Object(j.a)(e.list),[t.payload])});case y:return Object(b.a)(Object(b.a)({},e),{},{list:e.list.map((function(e){return e.id===t.payload.id?Object(b.a)({},t.payload):e}))});case v:return Object(b.a)(Object(b.a)({},e),{},{list:e.list.filter((function(e){return e.id!==t.payload}))});default:return Object(b.a)({},e)}},modalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(b.a)(Object(b.a)({},e),{},{modal:!0});case N:return Object(b.a)(Object(b.a)({},e),{},{modal:!1});default:return e}},form:k.a}),T=(n(216),n(217),n(33)),P=n(61),D=n(25),L=n(51),F=n(3),H=function(e){var t=e.id,n=e.title,a=e.price,r=e.description,i=e.image,s=Object(o.c)(),l=Object(c.useState)(!1),u=Object(T.a)(l,2),j=u[0],d=u[1],h=Object(c.useState)({title:n,price:a,description:r,image:i}),m=Object(T.a)(h,2),x=m[0],g=m[1],C=function(e){var t=e.target,n=t.name,c=t.value;return g((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(P.a)({},n,c))}))},N=function(){return d((function(e){return!e}))};return Object(F.jsxs)(D.a,{children:[Object(F.jsx)(D.a.Img,{variant:"top",src:i}),Object(F.jsxs)(D.a.Body,{children:[Object(F.jsxs)(D.a.Title,{children:[!j&&n,j&&Object(F.jsx)(L.a.Control,{type:"text",required:!0,value:x.title,name:"title",placeholder:"Title",onChange:function(e){return C(e)}})]}),Object(F.jsxs)(D.a.Text,{children:[!j&&a+"$",j&&Object(F.jsx)(L.a.Control,{type:"text",required:!0,value:x.price,name:"price",placeholder:"Price",onChange:function(e){return C(e)}})]}),Object(F.jsxs)(D.a.Text,{children:[!j&&r,j&&Object(F.jsx)(L.a.Control,{required:!0,as:"textarea",rows:3,value:x.description,name:"description",placeholder:"Description",onChange:function(e){return C(e)}})]}),j&&Object(F.jsx)(D.a.Text,{children:Object(F.jsx)(L.a.Control,{type:"text",value:x.image,name:"image",placeholder:"image URL",onChange:function(e){return C(e)}})})]}),Object(F.jsx)(D.a.Footer,{children:Object(F.jsxs)("small",{className:"text-muted",children:[!j&&Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("button",{type:"button",className:"btn btn-outline-info mr-2",onClick:N,children:"Edit"})}),j&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("button",{type:"button",className:"btn btn-outline-success  mr-2",onClick:function(){s(function(e,t){return function(){var n=Object(O.a)(p.a.mark((function n(c){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{a={id:t,title:e.title,price:+e.price,description:e.description,image:e.image||" "},f.put("/phones/".concat(t),a).then((function(e){return c({type:y,payload:a})}))}catch(r){console.log(r)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(Object(b.a)({},x),t)),N()},children:"Update"}),Object(F.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){var e;s((e=t,function(){var t=Object(O.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{f.delete("/phones/".concat(e)).then((function(t){n({type:v,payload:e})}))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"Delete"}),Object(F.jsx)("button",{type:"button",className:"btn btn-outline-secondary mr-2",onClick:N,children:"Cancel"})]})]})})]})},R=n(128),S=n(28),A=n(127),q=n(63),B=function(){return Object(F.jsx)(S.a,{children:Object(F.jsx)(q.a,{className:"justify-content-md-center",children:Object(F.jsx)(A.a,{animation:"border",variant:"info"})})})},_=function(){var e=Object(o.d)((function(e){return[e.phones.list,e.phones.isLoading]})),t=Object(T.a)(e,2),n=t[0],a=t[1];return Object(F.jsxs)(S.a,{children:[a&&Object(F.jsx)(B,{}),Object(F.jsx)(R.a,{children:n.map((function(e){return Object(c.createElement)(H,Object(b.a)(Object(b.a)({},e),{},{key:e.id}))}))})]})},I=n(62),U=n(40),M=n(50),V=n(262),J=n(261),G=function(e){var t={};return e.title||(t.title="Required"),e.price||(t.price="Required"),e.description||(t.description="Required"),isNaN(Number(e.price))&&(t.price="Must be a number"),t},W=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},c=function(e){for(var t in e)return!1;return!0},e.next=4,(a=t.title,f.get("/search?title=".concat(a)).then((function(e){return e.data}))).then((function(e){return e.count}));case 4:return e.sent&&(n.title="That title is exist!"),e.abrupt("return",new Promise((function(e,t){c(n)||t(n),e()})));case 7:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=e.input,n=e.label,c=e.type,a=e.meta,r=(a.asyncValidating,a.touched),i=a.error;return Object(F.jsx)("div",{className:"form-group",children:Object(F.jsxs)("div",{children:[Object(F.jsx)("input",Object(b.a)(Object(b.a)({},t),{},{type:c,placeholder:n,className:"form-control ".concat(r?i?" is-invalid":" is-valid":"")})),r&&i&&Object(F.jsx)("div",{className:"invalid-feedback",children:i})]})})},z=Object(J.a)({form:"addPhone",validate:G,asyncValidate:W,asyncBlurFields:["title"]})((function(e){var t=e.handleSubmit,n=e.pristine,c=e.reset,a=e.submitting,r=e.handleClose;return Object(F.jsxs)("form",{onSubmit:t,children:[Object(F.jsx)(V.a,{name:"title",type:"text",component:$,label:"Title"}),Object(F.jsx)(V.a,{name:"price",type:"text",component:$,label:"Price"}),Object(F.jsx)(V.a,{name:"description",type:"text",component:$,label:"Description"}),Object(F.jsx)(V.a,{name:"image",type:"text",component:$,label:"Image"}),Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:n||a,children:"Add Phone"}),Object(F.jsx)("button",{type:"button",className:"btn btn-secondary",disabled:n||a,onClick:c,children:"Clear Values"}),Object(F.jsx)("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:r,children:"Close"})]})]})})),K=function(e){var t=e.modal,n=Object(o.c)(),a=Object(c.useState)(t),r=Object(T.a)(a,2),i=r[0],s=r[1],l=function(){s(!1),n((function(e){return e({type:N})}))};return Object(F.jsxs)(M.a,{show:i,onHide:l,animation:!0,children:[Object(F.jsx)(M.a.Header,{children:Object(F.jsx)(M.a.Title,{children:"New Phone"})}),Object(F.jsx)(M.a.Body,{children:Object(F.jsx)(z,{onSubmit:function(e){n(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(n){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{c={title:e.title,price:+e.price,description:e.description,image:e.image||" "},f.post("/phones",c).then((function(e){var t=e.data.id;f.get("/phones/".concat(t)).then((function(e){n({type:m,payload:e.data})})).catch((function(e){console.log(e)}))}))}catch(a){console.log(a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),l()},handleClose:l})})]})},Q=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.modalReducer.modal}));return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(U.a,{expand:"lg",variant:"light",bg:"light",children:Object(F.jsxs)(S.a,{children:[Object(F.jsx)(U.a.Brand,{href:"/",children:"CRUD"}),Object(F.jsx)(U.a.Toggle,{}),Object(F.jsx)(U.a.Collapse,{className:"justify-content-end",children:Object(F.jsx)(U.a.Text,{children:Object(F.jsx)("button",{className:"btn btn-sucsess",onClick:function(){e((function(e){return e({type:C})}))},children:"ADD PHONE"})})})]})}),t&&Object(F.jsx)(K,{modal:t})]})};var X=function(){return Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(Q,{}),Object(F.jsx)(_,{}),Object(F.jsx)(S.a,{fluid:!0,children:Object(F.jsx)(q.a,{children:Object(F.jsx)(I.a,{className:"text-center pt-3 pb-3",children:"\xa9 2021"})})})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,264)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Z=(n(258),Object(i.d)(E,Object(i.a)(s.a,u.a)));Z.dispatch(function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f.get("/phones").then((function(e){t({type:x,payload:e.data})}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.a.render(Object(F.jsx)(o.a,{store:Z,children:Object(F.jsx)(X,{})}),document.getElementById("root")),Y()}},[[259,1,2]]]);
//# sourceMappingURL=main.d32bce61.chunk.js.map